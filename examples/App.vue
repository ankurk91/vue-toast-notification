<template>
  <div>
    <nav class="navbar navbar-expand-lg navbar navbar-light bg-white shadow-sm mb-3">
      <span class="navbar-brand mb-0">Vue.js Toast</span>
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/ankurk91/vue-toast-notification"
             target="_blank"> GitHub</a></li>
      </ul>
    </nav>
    <main class="container">
      <div class="row">
        <div class="col-md-8 mb-3">
          <div class="card">
            <form class="card-body" method="post" @submit.prevent="show">

              <div class="form-group">
                <label>Message <code>(required)</code></label>
                <input type="text" required class="form-control" v-model.trim="form.message" name="message"/>
              </div>

              <div class="form-group">
                <label>Type</label>
                <div>
                  <div v-for="item in types" :key="item" class="custom-control custom-radio custom-control-inline">
                    <input v-model="form.type" :value="item" type="radio" :id="`radio-type-${item}`"
                           class="custom-control-input">
                    <label class="custom-control-label text-capitalize" :for="`radio-type-${item}`">{{ item }}</label>
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label>Duration <code>({{ form.duration / 1000 }} seconds)</code></label>
                <input type="range" class="custom-range" min="0" step="1000" max="60000"
                       v-model.number="form.duration">
              </div>

              <div class="form-row">
                <div class="col-md-3">
                  <div class="form-group">
                    <label>Dismissible</label>
                    <div class="custom-control custom-checkbox">
                      <input v-model="form.dismissible" type="checkbox" class="custom-control-input"
                             id="checkbox-dismissible">
                      <label class="custom-control-label" for="checkbox-dismissible">Dismiss on click</label>
                    </div>
                  </div>
                </div>
                <div class="col-md-9">
                  <div class="form-group">
                    <label>Queue</label>
                    <div class="custom-control custom-checkbox">
                      <input v-model="form.queue" type="checkbox" class="custom-control-input"
                             id="checkbox-queue">
                      <label class="custom-control-label" for="checkbox-queue">Wait for previous to dismiss before
                        showing new</label>
                    </div>
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label>Position</label>
                <div>
                  <div v-for="item in positions" :key="item" class="custom-control custom-radio custom-control-inline">
                    <input v-model="form.position" :value="item" type="radio" :id="`radio-position-${item}`"
                           class="custom-control-input">
                    <label class="custom-control-label text-capitalize"
                           :for="`radio-position-${item}`">{{ item }}</label>
                  </div>
                </div>
              </div>

              <hr>

              <button type="submit" class="btn btn-primary mr-3">Show notification</button>
              <button type="button" class="btn btn-outline-info mr-3" @click="showAll">Demo all</button>
              <button type="button" class="btn btn-secondary mr-3" @click="clearAll">Hide all</button>
              <button type="button" class="btn btn-success" @click="showCustomToast">Show custom toast</button>
              

            </form>
          </div>
        </div>

        <aside class="col-md-4 mb-3">
          <div class="card">
            <div class="card-header"> Links</div>
            <div class="card-body">
              <ul>
                <li><a href="https://github.com/ankurk91/vue-toast-notification" target="_blank">GitHub</a></li>
                <li><a href="https://www.npmjs.com/package/vue-toast-notification" target="_blank">npm</a></li>
              </ul>
            </div>
          </div>
        </aside>
      </div>

    </main>
    <footer class="text-center text-muted small mb-3">
      Created by <a href="https://twitter.com/ankurk91" target="_blank" rel="noopener">@ankurk91</a>
    </footer>
  </div>
</template>

<script>
import {ToastPositions,useToast} from '../src/index';
import CustomToast from './CustomToast.vue';

export default {
  name: 'app',
  data() {
    return {
      form: {
        message: 'This is a sample message',
        type: 'success',
        duration: 10000 * 5,
        dismissible: true,
        queue: false,
        position: 'bottom-right',
        onClick: this.onClick,
        onDismiss: this.onDismiss,
      },
      types: [
        'success',
        'error',
        'warning',
        'info',
        'default',
      ],
      positions: ToastPositions
    }
  },
  components: {},
  mounted() {
    // Let's show some toasts on page load
    this.showAll();
  },
  methods: {
    showAll() {
      this.types.forEach((type) => {
        this.$toast.open(Object.assign(this.form, {
          type
        }))
      })
    },
    onClick() {
      console.log("User dismissed the notification.")
    },
    onDismiss() {
      console.log("Toast was dismissed.")
    },
    show() {
      this.$toast.open(this.form);
    },
    clearAll() {
      this.$toast.clear()
    },
    showCustomToast() {
      const toast = useToast()
      toast.success({
        customToast: {
          component: CustomToast,
          props: {
            title: 'Look at me, I am so custom',
            description: 'Try it!'
          }
        },
        duration: this.form.duration
      })
    }
  }
}
</script>
